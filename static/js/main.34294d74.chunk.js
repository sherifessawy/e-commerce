(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{33:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),i=c(18),a=c.n(i),s=c(5),o=c(21),j=c(4),l=c(0),u=r.a.createContext("");function b(e){var t=Object(n.useState)([]),c=Object(j.a)(t,2),r=c[0],i=c[1],a=Object(n.useState)([]),s=Object(j.a)(a,2),b=s[0],d=s[1],h=Object(n.useState)(!1),O=Object(j.a)(h,2),m=O[0],f=O[1],x=Object(n.useState)(""),v=Object(j.a)(x,2),g=v[0],p=v[1];Object(n.useEffect)((function(){fetch("https://raw.githubusercontent.com/bobziroll/scrimba-react-bootcamp-images/master/images.json").then((function(e){return e.json()})).then((function(e){var t=e.filter((function(e){return"11"!==e.id}));i(t)}))}),[]);return Object(l.jsx)(u.Provider,{value:{photos:r,toggleFav:function(e){var t=r.map((function(t){return t.id===e&&(t.isFavorite=!t.isFavorite),t}));i(t)},cartItems:b,handleCartItems:function(e){if(b.find((function(t){return t.id===e.id}))){var t=b.filter((function(t){return t.id!==e.id}));d(t)}else d((function(t){return[].concat(Object(o.a)(t),[e])}))},emptyCart:function(){d([])},auth:m,setAuth:f,userName:g,setUserName:p},children:e.children})}var d=function(){var e=Object(n.useContext)(u),t=e.cartItems,c=e.auth,r=e.userName,i=e.photos.filter((function(e){return!0===e.isFavorite}));return Object(l.jsxs)("header",{children:[Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("h2",{children:"Pic Some"})}),Object(l.jsxs)("div",{className:"header-right",children:[Object(l.jsx)(s.b,{to:"/login",children:Object(l.jsx)("h4",{className:"login-welcome-text",children:c?"Welcome, ".concat(r):"Log In"})}),Object(l.jsx)(s.b,{to:"/favorites",children:Object(l.jsx)("i",{className:i.length?"ri-heart-2-fill fav-tab":"ri-heart-line fav-tab"})}),Object(l.jsx)(s.b,{to:"/cart",children:Object(l.jsx)("i",{className:t.length?"ri-shopping-cart-fill ri-fw ri-2x cart-icon":"ri-shopping-cart-line ri-fw ri-2x cart-icon"})})]})]})};var h=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],r=t[1],i=Object(n.useRef)(null);function a(){r(!0),console.log("hovered",i.current)}function s(){r(!1)}return Object(n.useLayoutEffect)((function(){return i.current.addEventListener("mouseenter",a),i.current.addEventListener("mouseleave",s),function(){i.current.removeEventListener("mouseenter",a),i.current.removeEventListener("mouseleave",s)}}),[]),[c,i]};var O=function(e){var t=e.item,c=e.setTotalCost,r=Object(n.useContext)(u).handleCartItems,i=h(),a=Object(j.a)(i,2),s=a[0],o=a[1],b=Object(n.useState)(1),d=Object(j.a)(b,2),O=d[0],m=d[1],f=s?"ri-delete-bin-fill":"ri-delete-bin-line";return Object(l.jsxs)("div",{className:"cart-item",children:[Object(l.jsx)("i",{className:f,onClick:function(){r(t),c((function(e){return e-5.99*O}))},ref:o}),Object(l.jsx)("img",{src:t.url,width:"130px"}),Object(l.jsxs)("div",{className:"add-remove",children:[Object(l.jsx)("i",{className:"ri-subtract-fill",onClick:function(){O>1&&(m((function(e){return e-1})),c((function(e){return e-5.99})))}}),Object(l.jsxs)("p",{children:["Qty: ",O]}),Object(l.jsx)("i",{className:"ri-add-circle-line",onClick:function(){m((function(e){return e+1})),c((function(e){return e+5.99}))}})]}),Object(l.jsxs)("p",{children:["$",Math.round(5.99*O*100)/100]})]})};var m=function(e){var t=e.setTotalCost,c=Object(n.useContext)(u).emptyCart,r=Object(n.useState)("Place Order"),i=Object(j.a)(r,2),a=i[0],s=i[1];return Object(l.jsx)("div",{className:"order-button",children:Object(l.jsx)("button",{onClick:function(){s("ordering..."),setTimeout((function(){s("Place Order"),c(),t(0)}),3e3)},children:a})})};var f=function(){var e=Object(n.useContext)(u).cartItems,t=Object(n.useState)(5.99*e.length),c=Object(j.a)(t,2),r=c[0],i=c[1],a=e.map((function(e){return Object(l.jsx)(O,{item:e,setTotalCost:i},e.id)}));return Object(l.jsxs)("main",{className:"cart-page",children:[Object(l.jsx)("h1",{children:"Check out"}),a,Object(l.jsxs)("p",{className:"total-cost",children:["Total: $",r>=0?Math.round(r):0]}),e.length?Object(l.jsx)(m,{setTotalCost:i}):Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("p",{className:"pic-some",children:"Your cart is empty, pick some?"})})]})};var x=function(e){var t=e.className,c=e.img,r=Object(n.useState)(!1),i=Object(j.a)(r,2),a=i[0],s=i[1],o=Object(n.useContext)(u),b=o.toggleFav,d=o.handleCartItems,h=o.cartItems,O=(a||c.isFavorite)&&Object(l.jsx)("i",{onClick:function(){return b(c.id)},className:c.isFavorite?"ri-heart-fill favorite":"ri-heart-line favorite"});return Object(l.jsxs)("div",{className:"".concat(t," image-container"),onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:[Object(l.jsx)("img",{src:c.url,className:"image-grid"}),O,h.find((function(e){return e.id===c.id}))?Object(l.jsx)("i",{onClick:function(){return d(c)},className:"ri-shopping-cart-fill cart"}):a?Object(l.jsx)("i",{onClick:function(){return d(c)},className:"ri-add-circle-line cart"}):void 0]})};var v=function(){var e=Object(n.useContext)(u).photos.map((function(e,t){return Object(l.jsx)(x,{img:e,className:(c=t,c%3===0?"big":c%6===0?"wide":void 0)},e.id);var c}));return Object(l.jsx)("main",{className:"photos",children:e})},g=c(2);var p=function(){var e=Object(n.useContext)(u),t=e.auth,c=e.setAuth,r=e.userName,i=e.setUserName,a=(Object(g.h)().state||{from:{pathname:"/"}}).from,s=Object(g.g)(),o="/cart"===a.pathname?"You have to log in to view the cart":"You are logged out";return Object(l.jsxs)("div",{className:"login-page",children:[t?Object(l.jsxs)("h2",{children:["Welcome ",r||"user who did not give us his name",", You are logged in"]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:o}),Object(l.jsxs)("label",{children:["Enter your name:",Object(l.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},value:r})]}),Object(l.jsx)("hr",{})]}),Object(l.jsx)("button",{onClick:function(){c((function(e){return!e})),s.replace(a)},className:"login-btn",children:t?"Log Out":"Log In"})]})};var N=function(){var e=Object(n.useContext)(u),t=e.photos,c=e.cartItems,r=t.filter((function(e){return!0===e.isFavorite}));console.log(r);var i=r.map((function(e,t){return Object(l.jsx)(x,{img:e,className:"favorited-image"},e.id)}));return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{className:"favorited-title",children:"Favorited items"}),i,i.length?c.length?Object(l.jsx)(s.b,{to:"/cart",children:Object(l.jsx)("p",{className:"go-to-cart-btn",children:"go to cart"})}):Object(l.jsx)("p",{className:"pic-some",children:"Your cart is still empty, add favorited items to cart by hovering over them and clicking the plus icon"}):Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("p",{className:"pic-some",children:"You have no items favorited, pick some?"})})]})},C=c(16),k=c(22),I=["children"];var w=function(e){var t=e.children,c=Object(k.a)(e,I),r=Object(n.useContext)(u).auth;return Object(l.jsx)(g.b,Object(C.a)(Object(C.a)({},c),{},{render:function(e){var c=e.location;return r?t:Object(l.jsx)(g.a,{to:{pathname:"/login",state:{from:c}}})}}))};var y=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(d,{}),Object(l.jsxs)(g.d,{children:[Object(l.jsx)(w,{path:"/cart",children:Object(l.jsx)(f,{})}),Object(l.jsx)(g.b,{path:"/login",children:Object(l.jsx)(p,{})}),Object(l.jsx)(g.b,{path:"/favorites",children:Object(l.jsx)(N,{})}),Object(l.jsx)(g.b,{path:"/",children:Object(l.jsx)(v,{})})]})]})};a.a.render(Object(l.jsx)(b,{children:Object(l.jsx)(s.a,{children:Object(l.jsx)(y,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.34294d74.chunk.js.map