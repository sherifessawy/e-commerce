(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{33:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),i=c(18),a=c.n(i),s=c(4),o=c(21),j=c(6),l=c(0),u=n.a.createContext("");function b(e){var t=Object(r.useState)([]),c=Object(j.a)(t,2),n=c[0],i=c[1],a=Object(r.useState)([]),s=Object(j.a)(a,2),b=s[0],h=s[1],d=Object(r.useState)(!1),m=Object(j.a)(d,2),O=m[0],x=m[1],f=Object(r.useState)(""),v=Object(j.a)(f,2),g=v[0],p=v[1];Object(r.useEffect)((function(){fetch("https://raw.githubusercontent.com/bobziroll/scrimba-react-bootcamp-images/master/images.json").then((function(e){return e.json()})).then((function(e){return i(e)}))}),[]);return Object(l.jsx)(u.Provider,{value:{photos:n,toggleFav:function(e){var t=n.map((function(t){return t.id===e&&(t.isFavorite=!t.isFavorite),t}));i(t)},cartItems:b,handleCartItems:function(e){if(b.find((function(t){return t.id===e.id}))){var t=b.filter((function(t){return t.id!==e.id}));h(t)}else h((function(t){return[].concat(Object(o.a)(t),[e])}))},emptyCart:function(){h([])},auth:O,setAuth:x,userName:g,setUserName:p},children:e.children})}var h=function(){var e=Object(r.useContext)(u),t=e.cartItems,c=e.auth,n=e.userName,i=e.photos.filter((function(e){return!0===e.isFavorite}));return Object(l.jsxs)("header",{children:[Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("h2",{children:"Pic Some"})}),Object(l.jsxs)("div",{className:"header-right",children:[Object(l.jsx)(s.b,{to:"/login",children:Object(l.jsx)("h4",{className:"login-welcome-text",children:c?"Welcome, ".concat(n):"Log In"})}),Object(l.jsx)(s.b,{to:"/favorites",children:Object(l.jsx)("i",{className:i.length?"ri-heart-2-fill fav-tab":"ri-heart-line fav-tab"})}),Object(l.jsx)(s.b,{to:"/cart",children:Object(l.jsx)("i",{className:t.length?"ri-shopping-cart-fill ri-fw ri-2x cart-icon":"ri-shopping-cart-line ri-fw ri-2x cart-icon"})})]})]})};var d=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),c=t[0],n=t[1],i=Object(r.useRef)(null);function a(){n(!0),console.log("hovered",i.current)}function s(){n(!1)}return Object(r.useLayoutEffect)((function(){return i.current.addEventListener("mouseenter",a),i.current.addEventListener("mouseleave",s),function(){i.current.removeEventListener("mouseenter",a),i.current.removeEventListener("mouseleave",s)}}),[]),[c,i]};var m=function(e){var t=e.item,c=Object(r.useContext)(u).handleCartItems,n=d(),i=Object(j.a)(n,2),a=i[0],s=i[1],o=a?"ri-delete-bin-fill":"ri-delete-bin-line";return Object(l.jsxs)("div",{className:"cart-item",children:[Object(l.jsx)("i",{className:o,onClick:function(){return c(t)},ref:s}),Object(l.jsx)("img",{src:t.url,width:"130px"}),Object(l.jsx)("p",{children:"$5.99"})]})};var O=function(){var e=Object(r.useContext)(u).emptyCart,t=Object(r.useState)("Place Order"),c=Object(j.a)(t,2),n=c[0],i=c[1];return Object(l.jsx)("div",{className:"order-button",children:Object(l.jsx)("button",{onClick:function(){i("ordering..."),setTimeout((function(){i("Place Order"),e()}),3e3)},children:n})})};var x=function(){var e=Object(r.useContext)(u).cartItems,t=e.map((function(e){return Object(l.jsx)(m,{item:e},e.id)})),c=(5.99*e.length).toLocaleString("en-US",{style:"currency",currency:"USD"});return Object(l.jsxs)("main",{className:"cart-page",children:[Object(l.jsx)("h1",{children:"Check out"}),t,Object(l.jsxs)("p",{className:"total-cost",children:["Total: ",c]}),e.length?Object(l.jsx)(O,{}):Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("p",{className:"pic-some",children:"Your cart is empty, pick some?"})})]})};var f=function(e){var t=e.className,c=e.img,n=Object(r.useState)(!1),i=Object(j.a)(n,2),a=i[0],s=i[1],o=Object(r.useContext)(u),b=o.toggleFav,h=o.handleCartItems,d=o.cartItems,m=(a||c.isFavorite)&&Object(l.jsx)("i",{onClick:function(){return b(c.id)},className:c.isFavorite?"ri-heart-fill favorite":"ri-heart-line favorite"});return Object(l.jsxs)("div",{className:"".concat(t," image-container"),onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:[Object(l.jsx)("img",{src:c.url,className:"image-grid"}),m,d.find((function(e){return e.id===c.id}))?Object(l.jsx)("i",{onClick:function(){return h(c)},className:"ri-shopping-cart-fill cart"}):a?Object(l.jsx)("i",{onClick:function(){return h(c)},className:"ri-add-circle-line cart"}):void 0]})};var v=function(){var e=Object(r.useContext)(u).photos.map((function(e,t){return Object(l.jsx)(f,{img:e,className:(c=t,c%3===0?"big":c%6===0?"wide":void 0)},e.id);var c}));return Object(l.jsx)("main",{className:"photos",children:e})},g=c(2);var p=function(){var e=Object(r.useContext)(u),t=e.auth,c=e.setAuth,n=e.userName,i=e.setUserName,a=(Object(g.h)().state||{from:{pathname:"/"}}).from,s=Object(g.g)(),o="/cart"===a.pathname?"You have to log in to view the cart":"You are logged out";return Object(l.jsxs)("div",{className:"login-page",children:[t?Object(l.jsxs)("h2",{children:["Welcome ",n||"user who did not give us his name",", You are logged in"]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:o}),Object(l.jsxs)("label",{children:["Enter your name:",Object(l.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},value:n})]}),Object(l.jsx)("hr",{})]}),Object(l.jsx)("button",{onClick:function(){c((function(e){return!e})),s.replace(a)},className:"login-btn",children:t?"Log Out":"Log In"})]})};var N=function(){var e=Object(r.useContext)(u),t=e.photos,c=e.cartItems,n=t.filter((function(e){return!0===e.isFavorite}));console.log(n);var i=n.map((function(e,t){return Object(l.jsx)(f,{img:e,className:"favorited-image"},e.id)}));return Object(l.jsxs)("main",{children:[Object(l.jsx)("h1",{className:"favorited-title",children:"Favorited items"}),i,i.length?c.length?Object(l.jsx)(s.b,{to:"/cart",children:Object(l.jsx)("p",{className:"go-to-cart-btn",children:"go to cart"})}):Object(l.jsx)("p",{className:"pic-some",children:"Your cart is still empty, add favorited items to cart by hovering over them and clicking the plus icon"}):Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("p",{className:"pic-some",children:"You have no items favorited, pick some?"})})]})},C=c(16),k=c(22),y=["children"];var I=function(e){var t=e.children,c=Object(k.a)(e,y),n=Object(r.useContext)(u).auth;return Object(l.jsx)(g.b,Object(C.a)(Object(C.a)({},c),{},{render:function(e){var c=e.location;return n?t:Object(l.jsx)(g.a,{to:{pathname:"/login",state:{from:c}}})}}))};var S=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(h,{}),Object(l.jsxs)(g.d,{children:[Object(l.jsx)(g.b,{exact:!0,path:"/",children:Object(l.jsx)(v,{})}),Object(l.jsx)(I,{path:"/cart",children:Object(l.jsx)(x,{})}),Object(l.jsx)(g.b,{path:"/login",children:Object(l.jsx)(p,{})}),Object(l.jsx)(g.b,{path:"/favorites",children:Object(l.jsx)(N,{})})]})]})};a.a.render(Object(l.jsx)(b,{children:Object(l.jsx)(s.a,{children:Object(l.jsx)(S,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.ca3d5364.chunk.js.map